{% load i18n static admin_material %}

<aside style="z-index: 1;" class="sidenav navbar navbar-vertical navbar-expand-xs border-radius-lg fixed-start ms-2 bg-white my-2" id="sidenav-main">
    <div class="sidenav-header">
        <i class="fas fa-times p-3 cursor-pointer text-dark opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
           aria-hidden="true" id="iconSidenav"></i>
        <a class="navbar-brand px-4 py-3 m-0" href="{% url 'core:dashboard' %}">
            <img src="{% static "assets/img/logo-ct-dark.png" %}" class="navbar-brand-img" width="26" height="26" alt="main_logo">
            <span class="ms-1 text-sm text-dark">Salama · Microcrédito</span>
        </a>
    </div>

    <hr class="horizontal dark mt-0 mb-2">

    <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
        <ul class="navbar-nav">

            <!-- ====== SECÇÃO PRINCIPAL ====== -->
            <li class="nav-item">
                <a class="nav-link text-dark {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
                   href="{% url 'core:dashboard' %}">
                    <i class="material-symbols-rounded opacity-5">space_dashboard</i>
                    <span class="nav-link-text ms-1">Dashboard</span>
                </a>
            </li>

            <li class="nav-item mt-3">
                <h6 class="ps-4 ms-2 text-uppercase text-xs text-dark font-weight-bolder opacity-6">
                    Gestão da Carteira
                </h6>
            </li>

            <!-- CLIENTES -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-clientes" role="button"
                   aria-expanded="false" aria-controls="menu-clientes">
                    <i class="material-symbols-rounded opacity-5">groups</i>
                    <span class="nav-link-text ms-2 ps-1">Clientes</span>
                </a>
                <div class="collapse" id="menu-clientes">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="{% url 'core:member_list' %}">
                                <span class="sidenav-mini-icon"> LM </span>
                                <span class="sidenav-normal ms-2 ps-1"> Lista de Membros </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="{% url 'core:add_member' %}">
                                <span class="sidenav-mini-icon"> AM </span>
                                <span class="sidenav-normal ms-2 ps-1"> Adicionar Membros </span>
                            </a>
                        </li>

                    </ul>
                </div>
            </li>

            <!-- EMPRÉSTIMOS -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-emprestimos" role="button"
                   aria-expanded="false" aria-controls="menu-emprestimos">
                    <i class="material-symbols-rounded opacity-5">request_quote</i>
                    <span class="nav-link-text ms-2 ps-1">Empréstimos</span>
                </a>
                <div class="collapse" id="menu-emprestimos">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> NE </span>
                                <span class="sidenav-normal ms-2 ps-1"> Novo Empréstimo </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> AC </span>
                                <span class="sidenav-normal ms-2 ps-1"> Empréstimos Activos </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> PD </span>
                                <span class="sidenav-normal ms-2 ps-1"> Empréstimos Pendentes </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> TE </span>
                                <span class="sidenav-normal ms-2 ps-1"> Todos os Empréstimos </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> CE </span>
                                <span class="sidenav-normal ms-2 ps-1"> Calculadora de Empréstimos </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> TE </span>
                                <span class="sidenav-normal ms-2 ps-1"> Tipos de Empréstimo </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- PAGAMENTOS -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-pagamentos" role="button"
                   aria-expanded="false" aria-controls="menu-pagamentos">
                    <i class="material-symbols-rounded opacity-5">payments</i>
                    <span class="nav-link-text ms-2 ps-1">Pagamentos</span>
                </a>
                <div class="collapse" id="menu-pagamentos">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> PE </span>
                                <span class="sidenav-normal ms-2 ps-1"> Pagamento de Empréstimo </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> PC </span>
                                <span class="sidenav-normal ms-2 ps-1"> Pagamentos a Caminho </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- CONTAS -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-contas" role="button"
                   aria-expanded="false" aria-controls="menu-contas">
                    <i class="material-symbols-rounded opacity-5">account_balance_wallet</i>
                    <span class="nav-link-text ms-2 ps-1">Contas</span>
                </a>
                <div class="collapse" id="menu-contas">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                        <a class="nav-link text-dark" href="{% url 'core:client_account_list' %}">
                            <span class="sidenav-mini-icon"> CC </span>
                            <span class="sidenav-normal ms-2 ps-1"> Conta dos Clientes </span>
                        </a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link text-dark" href="{% url 'core:company_account_list' %}">
                            <span class="sidenav-mini-icon"> CE </span>
                            <span class="sidenav-normal ms-2 ps-1"> Conta da Empresa </span>
                        </a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link text-dark" href="{% url 'core:account_type_list' %}">
                            <span class="sidenav-mini-icon"> TC </span>
                            <span class="sidenav-normal ms-2 ps-1"> Tipos de Contas </span>
                        </a>
                        </li>

                    </ul>
                </div>
            </li>

            <!-- ====== PARÂMETROS & CONFIGURAÇÃO ====== -->
            <li class="nav-item mt-3">
                <h6 class="ps-4 ms-2 text-uppercase text-xs text-dark font-weight-bolder opacity-6">
                    Parâmetros & Configuração
                </h6>
            </li>

            <!-- JUROS -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-juros" role="button"
                   aria-expanded="false" aria-controls="menu-juros">
                    <i class="material-symbols-rounded opacity-5">percent</i>
                    <span class="nav-link-text ms-2 ps-1">Juros</span>
                </a>
                <div class="collapse" id="menu-juros">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> TJ </span>
                                <span class="sidenav-normal ms-2 ps-1"> Tipos de Juros </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> CJ </span>
                                <span class="sidenav-normal ms-2 ps-1"> Cálculo de Juros </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- TRANSAÇÕES -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-transaccoes" role="button"
                   aria-expanded="false" aria-controls="menu-transaccoes">
                    <i class="material-symbols-rounded opacity-5">swap_horiz</i>
                    <span class="nav-link-text ms-2 ps-1">Transacções</span>
                </a>
                <div class="collapse" id="menu-transaccoes">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> NT </span>
                                <span class="sidenav-normal ms-2 ps-1"> Nova Transacção </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> HT </span>
                                <span class="sidenav-normal ms-2 ps-1"> Histórico de Transacções </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> CT </span>
                                <span class="sidenav-normal ms-2 ps-1"> Categoria de Transacções </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- DESPESAS -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-despesas" role="button"
                   aria-expanded="false" aria-controls="menu-despesas">
                    <i class="material-symbols-rounded opacity-5">receipt_long</i>
                    <span class="nav-link-text ms-2 ps-1">Despesas</span>
                </a>
                <div class="collapse" id="menu-despesas">
                    <ul class="nav ms-4">
                        
                        </li>
                        <li class="nav-item">
                        <a class="nav-link text-dark" href="{% url 'core:expense_list' %}">
                            <span class="sidenav-mini-icon"> LD </span>
                            <span class="sidenav-normal ms-2 ps-1"> Lista de Despesas </span>
                        </a>
                        </li>
                        <li class="nav-item">
                        <a class="nav-link text-dark" href="{% url 'core:expense_category_list' %}">
                            <span class="sidenav-mini-icon"> CD </span>
                            <span class="sidenav-normal ms-2 ps-1"> Categoria de Despesas </span>
                        </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- UTILIZADORES -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-utilizadores" role="button"
                   aria-expanded="false" aria-controls="menu-utilizadores">
                    <i class="material-symbols-rounded opacity-5">manage_accounts</i>
                    <span class="nav-link-text ms-2 ps-1">Utilizadores</span>
                </a>
                <div class="collapse" id="menu-utilizadores">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> TU </span>
                                <span class="sidenav-normal ms-2 ps-1"> Todos os Utilizadores </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> PU </span>
                                <span class="sidenav-normal ms-2 ps-1"> Permissões de Utilizadores </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- ====== RELATÓRIOS & ADMIN ====== -->
            <li class="nav-item mt-3">
                <h6 class="ps-4 ms-2 text-uppercase text-xs text-dark font-weight-bolder opacity-6">
                    Relatórios & Administração
                </h6>
            </li>

            <!-- RELATÓRIOS -->
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-relatorios" role="button"
                   aria-expanded="false" aria-controls="menu-relatorios">
                    <i class="material-symbols-rounded opacity-5">bar_chart</i>
                    <span class="nav-link-text ms-2 ps-1">Relatórios</span>
                </a>
                <div class="collapse" id="menu-relatorios">
                    <ul class="nav ms-4">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> RC </span>
                                <span class="sidenav-normal ms-2 ps-1"> Relatório da Carteira </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> RR </span>
                                <span class="sidenav-normal ms-2 ps-1"> Relatório de Risco </span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="#">
                                <span class="sidenav-mini-icon"> RP </span>
                                <span class="sidenav-normal ms-2 ps-1"> Relatório de Pagamentos </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- ADMIN DJANGO (OPCIONAL, APROVEITA O admin_material) -->
            {% admin_get_menu as app_list %}
            {% if app_list %}
            <li class="nav-item">
                <a class="nav-link text-dark" data-bs-toggle="collapse" href="#menu-admin-django" role="button"
                   aria-expanded="false" aria-controls="menu-admin-django">
                    <i class="material-symbols-rounded opacity-5">tune</i>
                    <span class="nav-link-text ms-2 ps-1">Administração do Sistema</span>
                </a>
                <div class="collapse" id="menu-admin-django">
                    <ul class="nav ms-4">
                        {% for app in app_list %}
                            {% if app.has_perms and not app.pinned %}
                                {% if app.models %}
                                    <li class="nav-item">
                                        <span class="nav-link text-dark text-xs fw-bold">
                                            {{ app.label }}
                                        </span>
                                        <ul class="nav flex-column ms-3">
                                            {% for model in app.models %}
                                                {% if model.url %}
                                                    <li class="nav-item">
                                                        <a class="nav-link text-dark" href="{{ model.url }}">
                                                            <span class="sidenav-mini-icon"> {{ model.label|first }} </span>
                                                            <span class="sidenav-normal ms-2 ps-1"> {{ model.label }} </span>
                                                        </a>
                                                    </li>
                                                {% endif %}
                                            {% endfor %}
                                        </ul>
                                    </li>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </li>
            {% endif %}
        </ul>
    </div>

    <div class="sidenav-footer position-absolute w-100 bottom-0">
        <div class="mx-3 mb-3">
            <span class="text-xs text-muted d-block mb-1">
                Salama · Microcrédito — v0.1 (localhost)
            </span>
        </div>
    </div>
</aside>
